---
title: 'GitHub-Discord Webhook'
description: 'Automatically create Discord forum threads from GitHub issues'
---

## Overview

The GitHub-Discord webhook integration automatically creates Discord forum threads when new issues are opened in your GitHub repository. Each issue generates a formatted thread with the issue title, description, labels, and a direct link back to GitHub.

This integration helps teams:
- Centralize discussions in Discord
- Get real-time notifications of new issues
- Track GitHub activity without leaving Discord
- Maintain organized issue discussions in forum threads

## Prerequisites

Before setting up the integration, you'll need:

- Admin access to a Discord server
- Admin access to your GitHub repository
- A deployment of the Z Combinator API (or local development environment)

## Setup

### 1. Discord Bot Setup

First, create a Discord bot and invite it to your server:

#### Create the Application

1. Go to [Discord Developer Portal](https://discord.com/developers/applications)
2. Click "New Application"
3. Give it a name (e.g., "GitHub Issues Bot")
4. Navigate to the "Bot" section
5. Click "Add Bot"
6. Copy the bot token (you'll need this later)

<Warning>
Keep your bot token secret. Never commit it to version control or share it publicly.
</Warning>

#### Configure Bot Permissions

1. In the "Bot" section, enable these Privileged Gateway Intents:
   - Message Content Intent (if you need to read message content)

2. Navigate to "OAuth2" → "URL Generator"
3. Select these scopes:
   - `bot`
4. Select these bot permissions:
   - Send Messages in Threads
   - Create Public Threads
   - Manage Threads
   - Read Message History

5. Copy the generated URL and open it in your browser to invite the bot to your server

#### Create Forum Channel

1. In Discord, enable Developer Mode (User Settings → Advanced → Developer Mode)
2. Create a new forum channel in your server
3. Right-click the channel and select "Copy Channel ID"
4. Save this ID for later

### 2. Environment Variables

Add these environment variables to your deployment (e.g., Vercel) or `.env.local` file:

<CodeGroup>

```bash .env.local
# GitHub-Discord Integration
GITHUB_WEBHOOK_SECRET='your-random-secret-string-here'
DISCORD_BOT_TOKEN='your-discord-bot-token-here'
DISCORD_FORUM_CHANNEL_ID='your-forum-channel-id-here'
```

```bash Vercel
# Add these in your Vercel project settings
GITHUB_WEBHOOK_SECRET=your-random-secret-string-here
DISCORD_BOT_TOKEN=your-discord-bot-token-here
DISCORD_FORUM_CHANNEL_ID=your-forum-channel-id-here
```

</CodeGroup>

**Environment Variable Details:**

- `GITHUB_WEBHOOK_SECRET`: A random string you create for webhook signature verification. Generate one with:
  ```bash
  node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
  ```

- `DISCORD_BOT_TOKEN`: The bot token copied from Discord Developer Portal

- `DISCORD_FORUM_CHANNEL_ID`: The forum channel ID copied from Discord

### 3. GitHub Webhook Configuration

Configure GitHub to send webhook events to your API:

1. Go to your GitHub repository
2. Navigate to **Settings → Webhooks → Add webhook**
3. Configure the webhook:

   - **Payload URL**: `https://[your-domain]/api/github-webhook`
   - **Content type**: `application/json`
   - **Secret**: Same value as `GITHUB_WEBHOOK_SECRET`
   - **Which events**: Select "Let me select individual events"
     - Check only: **Issues**
   - **Active**: Ensure this is checked

4. Click "Add webhook"

GitHub will immediately send a test ping. You can verify it succeeded by checking the webhook's "Recent Deliveries" section.

## How It Works

### Event Filtering

The webhook only processes **"opened"** issue events. Other events (closed, edited, labeled, etc.) are ignored but logged for debugging.

When an issue is opened, the integration:
1. Verifies the GitHub webhook signature (HMAC SHA-256)
2. Parses the issue payload
3. Creates a Discord forum thread with:
   - Thread name: `[#123] Issue Title` (truncated to 100 chars if needed)
   - Message content: Formatted issue details

### Message Format

Discord forum threads are created with this format:

```markdown
## New Issue in repository-name

**Issue #123: Issue Title**

**Repository:** owner/repository-name
**Author:** @username
**Labels:** `bug`, `enhancement`

**Description:**
[Issue description here, truncated if > 1500 chars]

**View on GitHub:** https://github.com/owner/repo/issues/123
```

### Retry Logic

The integration includes robust error handling with exponential backoff:
- Maximum attempts: 3
- Delay between attempts: 1s, 2s, 4s
- Automatically retries on transient Discord API failures

### Security

<Warning>
All webhook requests are verified using HMAC SHA-256 signature verification with timing-safe comparison to prevent timing attacks. Requests with invalid signatures are rejected with a 401 status code.
</Warning>

## Testing Locally

To test the webhook integration during development:

### 1. Start Your Development Server

```bash
cd ui
npm run dev
```

Your app will run on `http://localhost:3000`

### 2. Expose Localhost with ngrok

```bash
ngrok http 3000
```

ngrok will provide a public URL like `https://abc123.ngrok.io`

### 3. Configure GitHub Webhook

Use the ngrok URL for your webhook:
- Payload URL: `https://abc123.ngrok.io/api/github-webhook`

### 4. Test the Integration

1. Open a new issue in your GitHub repository
2. Check your Discord forum channel for the new thread
3. Monitor your terminal for logs

### 5. Generate Test Webhook (Optional)

You can manually test the endpoint with curl:

<CodeGroup>

```bash curl
# Generate signature
SECRET="your-webhook-secret"
PAYLOAD='{"action":"opened","issue":{"number":1,"title":"Test","body":"Testing","html_url":"https://github.com/owner/repo/issues/1","user":{"login":"testuser","avatar_url":""},"labels":[]},"repository":{"name":"repo","full_name":"owner/repo"}}'
SIGNATURE=$(echo -n "$PAYLOAD" | openssl dgst -sha256 -hmac "$SECRET" -binary | xxd -p -c 256)

# Send webhook
curl -X POST https://your-domain/api/github-webhook \
  -H "Content-Type: application/json" \
  -H "X-Hub-Signature-256: sha256=$SIGNATURE" \
  -d "$PAYLOAD"
```

```javascript Node.js
const crypto = require('crypto');

const secret = 'your-webhook-secret';
const payload = JSON.stringify({
  action: 'opened',
  issue: {
    number: 1,
    title: 'Test Issue',
    body: 'This is a test',
    html_url: 'https://github.com/owner/repo/issues/1',
    user: { login: 'testuser', avatar_url: '' },
    labels: []
  },
  repository: {
    name: 'repo',
    full_name: 'owner/repo'
  }
});

const signature = 'sha256=' + crypto
  .createHmac('sha256', secret)
  .update(payload)
  .digest('hex');

fetch('https://your-domain/api/github-webhook', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-Hub-Signature-256': signature
  },
  body: payload
});
```

</CodeGroup>

## API Response Format

### Success Response (200)

<Accordion title="Success - Thread Created">
```json
{
  "success": true,
  "message": "Discord forum thread created successfully",
  "thread": {
    "id": "1234567890123456789",
    "name": "[#42] Fix authentication bug"
  }
}
```
</Accordion>

<Accordion title="Success - Event Ignored">
```json
{
  "success": true,
  "message": "Event ignored: closed"
}
```
</Accordion>

### Error Responses

<AccordionGroup>
  <Accordion title="401 - Invalid Signature">
  ```json
  {
    "error": "Invalid signature"
  }
  ```
  </Accordion>

  <Accordion title="401 - Missing Signature">
  ```json
  {
    "error": "Missing signature header"
  }
  ```
  </Accordion>

  <Accordion title="500 - Configuration Error">
  ```json
  {
    "error": "Server configuration error",
    "details": "Missing environment variables: DISCORD_BOT_TOKEN, DISCORD_FORUM_CHANNEL_ID"
  }
  ```
  </Accordion>

  <Accordion title="500 - Processing Failed">
  ```json
  {
    "error": "Webhook processing failed",
    "details": "Failed to create Discord forum thread after 3 attempts: Rate limited"
  }
  ```
  </Accordion>
</AccordionGroup>

## Monitoring

### Vercel Logs

If deployed on Vercel, monitor webhook activity:

1. Go to your Vercel project
2. Navigate to "Logs"
3. Filter by `/api/github-webhook`

Look for these log patterns:
- `Processing new GitHub issue: owner/repo#123`
- `Successfully created Discord forum thread: [#123] Title (ID: ...)`
- `Attempt 1/3: Creating Discord forum thread for issue #123`

### GitHub Webhook Logs

Check webhook delivery status in GitHub:

1. Repository Settings → Webhooks
2. Click on your webhook
3. View "Recent Deliveries"
4. Click on a delivery to see:
   - Request headers and payload
   - Response status and body
   - Redeliver option if failed

## Troubleshooting

<AccordionGroup>
  <Accordion title="Discord thread not created">
  **Possible causes:**

  1. **Bot permissions**: Ensure bot has "Create Public Threads" and "Send Messages in Threads" permissions
  2. **Channel type**: Verify you're using a forum channel, not a text channel
  3. **Bot not in server**: Make sure you invited the bot to your Discord server
  4. **Environment variables**: Double-check all three env vars are set correctly

  **Debug steps:**
  - Check Vercel/server logs for error messages
  - Verify webhook received by checking GitHub's "Recent Deliveries"
  - Test Discord bot token with Discord API directly
  </Accordion>

  <Accordion title="401 Invalid signature">
  **Causes:**

  1. `GITHUB_WEBHOOK_SECRET` doesn't match the secret configured in GitHub
  2. Request is not from GitHub (potential security issue)

  **Solution:**
  - Regenerate webhook secret
  - Update both GitHub webhook settings and environment variable
  - Ensure you're using the same secret in both places
  </Accordion>

  <Accordion title="Events ignored">
  The webhook only processes "opened" issue events. Other events like:
  - `closed`
  - `edited`
  - `labeled`
  - `assigned`

  ...are intentionally ignored to avoid spam. This is working as designed.

  **To process other events:**
  Modify `ui/lib/githubDiscordService.ts` and update the event filter logic.
  </Accordion>

  <Accordion title="Rate limited by Discord">
  If you see "Rate limited" errors:

  1. Discord has rate limits on thread creation
  2. The integration already includes retry logic with exponential backoff
  3. If issues persist, consider:
     - Reducing webhook frequency
     - Implementing a queue system
     - Using Discord's burst rate limit headers to adjust delays
  </Accordion>

  <Accordion title="Message truncated">
  Discord has character limits:
  - **Thread name**: 100 characters
  - **Message content**: 2000 characters

  The integration automatically truncates:
  - Thread names to 97 chars + "..." if needed
  - Message descriptions to 1500 chars + truncation notice

  This is working as designed to comply with Discord's limits.
  </Accordion>
</AccordionGroup>

## Advanced Configuration

### Customize Message Format

To customize the Discord message format, edit the `formatIssueMessage` function in `ui/lib/githubDiscordService.ts`:

```typescript
export function formatIssueMessage(payload: GitHubIssuePayload): string {
  // Customize this function to change the message format
  // Maximum length: 2000 characters
}
```

### Process Additional Events

To handle other GitHub events (closed, edited, etc.), modify `ui/lib/githubDiscordService.ts`:

```typescript
function isOpenedIssueEvent(payload: GitHubIssuePayload): boolean {
  // Change this to process other events
  return payload.action === 'opened' && !!payload.issue;
}
```

### Adjust Retry Logic

Modify retry attempts and delays in `createForumThread` function:

```typescript
const maxAttempts = 3;  // Change number of retries
const baseDelayMs = 1000;  // Change base delay (1 second)
// Exponential backoff: 1s, 2s, 4s, 8s, etc.
```

## Next Steps

<CardGroup cols={2}>
  <Card title="API Reference" icon="code" href="/api-reference/openapi">
    Explore the complete API documentation
  </Card>
  <Card title="Integration Examples" icon="lightbulb" href="/integration/examples">
    View more integration patterns
  </Card>
</CardGroup>
